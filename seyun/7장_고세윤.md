# 캐시

<br>

## 7.1 불필요한 데이터 전송

- 캐시를 이용하면, 첫번째 서버 응답은 캐시에 보관

## 7.2 대역폭 병목

- 캐시는 네트워크 병목을 줄여줌
- 많은 네트워크가 원격 서버보다 로컬 네트워크 클라이언트에 더 넓은 대역폭을 제공
- 클라이언트들이 서버에 접근할 때의 속도는 그 경로에 있는 가장 느린 네트워크 속도와 같음

## 7.4 거리로 인한 지연

- 대역폭이 문제가 되지 않더라도, 거리가 문제가 될 수 있음

## 7.5 적중과 부적중

- 캐시는 모든 사본을 저장하지 않음
- 캐시 요청이 도착했을 때, 그에 대응하는 사본이 있다면, 그를 이용해 요청이 처리될 수 있음
- 이를 캐시 적중
- 대응하는 사본이 없다면 원 서버로 전달 -> 캐시 부적중

### 7.5.1 재검사

- 원 서버 콘텐츠는 변경될 수 있기에 캐시는 반드시 그들이 갖고 있는 사본이 여전히 최신인지 서버를 통해 점검
- 신선도 검사를 HTTP 재검사라 부름
- 효과적인 재검사를 위해 HTTP는 서버로부터 전체 객체를 가져오지 않고도 콘텐츠가 여전히 신선한지 빠르게 검사할 수 있는 특별한 요청을 정의
- 캐시는 스스로 원한다면 언제든지 사본을 재검사
- 사본이 검사를 할 필요가 있을 정도로 충분히 오래된 경우에만 재검사
- 신선도 검사에 대한 HTTP 규칙을 뒷 부분에서 설명
- 캐시는 캐시된 사본의 재검사가 필요할 때, 원 서버에 작은 재검사 요청을 보냄
- 콘텐츠가 변경되지 않았다면 304 Not Modified 응답을 보냄
- 그 사본이 여전히 유효함을 알게 된 캐시는 즉각 사본이 신선하다고 임시로 다시 표시한 뒤 그 사본을 클라이언트에게 제공
    - 재검사 적중 혹은 느린 적중
- 순수 캐시 적중보다 느린데, 원 서버와 검사를 할 필요가 있기 때문
- 캐시 부적중보다는 빠른데, 서버로부터 객체 데이터를 받아올 필요가 없기 때문
- HTTP는 캐시된 객체를 재확인하기 위한 몇 가지 도구 제공
- if-Modified-Since 헤더
    - 서버에게 보내는 GET 요청에 이 헤더를 추가하면 캐시된 시간 이후에 변경된 경우에만 사본을 보내달라는 의미
- GET if-Modified-Since 요청이 서버에 도착했을 때, 일어날 수 있는 상황
    - 재검사 적중
    - 재검사 부적중
    - 객체 삭제
